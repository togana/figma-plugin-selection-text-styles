var y=Object.defineProperty,Q=Object.defineProperties,Y=Object.getOwnPropertyDescriptor,ee=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertyNames,R=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var k=(e,t,n)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c=(e,t)=>{for(var n in t||(t={}))z.call(t,n)&&k(e,n,t[n]);if(R)for(var n of R(t))oe.call(t,n)&&k(e,n,t[n]);return e},u=(e,t)=>Q(e,ee(t));var d=(e,t)=>()=>(e&&(t=e(e=0)),t);var ne=(e,t)=>{for(var n in t)y(e,n,{get:t[n],enumerable:!0})},re=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of te(t))!z.call(e,o)&&o!==n&&y(e,o,{get:()=>t[o],enumerable:!(i=Y(t,o))||i.enumerable});return e};var ie=e=>re(y({},"__esModule",{value:!0}),e);function N(e,t){let n=`${U}`;return U+=1,p[n]={handler:t,name:e},function(){delete p[n]}}function $(e,t){let n=!1;for(let i in p)p[i].name===e&&(p[i].handler.apply(null,t),n=!0);if(n===!1)throw new Error(`No event handler with name \`${e}\``)}var p,U,E,F=d(()=>{p={},U=0;E=typeof window=="undefined"?function(e,...t){figma.ui.postMessage([e,...t])}:function(e,...t){window.parent.postMessage({pluginMessage:[e,...t]},"*")};typeof window=="undefined"?figma.ui.onmessage=function(e){if(!Array.isArray(e))return;let[t,...n]=e;typeof t=="string"&&$(t,n)}:window.onmessage=function(e){if(typeof e.data.pluginMessage=="undefined")return;let t=e.data.pluginMessage;if(!Array.isArray(t))return;let[n,...i]=e.data.pluginMessage;typeof n=="string"&&$(n,i)}});function T(e,t){if(typeof __html__=="undefined")throw new Error("No UI defined");let n=`<div id="create-figma-plugin"></div><script>document.body.classList.add('theme-${figma.editorType}');const __FIGMA_COMMAND__='${typeof figma.command=="undefined"?"":figma.command}';const __SHOW_UI_DATA__=${JSON.stringify(typeof t=="undefined"?{}:t)};${__html__}</script>`;figma.showUI(n,u(c({},e),{themeColors:typeof e.themeColors=="undefined"?!0:e.themeColors}))}var L=d(()=>{});var h=d(()=>{F();L()});var X,P,_,v=d(()=>{"use strict";X=e=>("children"in e?e.children.map(t=>X(t)):[e]).flat(),P=(e,t)=>Math.round(e*Math.pow(10,t))/Math.pow(10,t),_=()=>{let n=figma.currentPage.selection.reduce((i,o)=>{let a=X(o);return[...i,...a]},[]).filter(i=>i.type==="TEXT").reduce((i,o)=>{var w,V,M,B,D,O;if(o.textStyleId===figma.mixed||o.fontName===figma.mixed||o.fontSize===figma.mixed||o.lineHeight===figma.mixed||o.letterSpacing===figma.mixed){let K={textStyleId:"mixed",textStyleName:"mixed",fontFamily:"mixed",fontStyle:"mixed",fontSizeValue:0,fontSize:"mixed",lineHeightValue:0,lineHeight:"mixed",letterSpacingValue:0,letterSpacing:"mixed",nodes:[...(V=(w=i.mixed)==null?void 0:w.nodes)!=null?V:[],o.id]};return u(c({},i),{mixed:K})}let a=String(o.fontSize),r=o.fontSize,m=o.lineHeight,s=m.unit==="AUTO"?"Auto":P(m.value,2),g=m.unit==="AUTO"?"":m.unit==="PERCENT"?"%":"px",f=`${s}${g}`,x=o.textStyleId&&(B=(M=figma.getStyleById(String(o.textStyleId)))==null?void 0:M.name)!=null?B:"",l=o.fontName.family,b=o.fontName.style,A=o.letterSpacing,I=P(A.value,2),q=A.unit==="PERCENT"?"%":"px",C=`${I}${q}`,H=o.textStyleId?o.textStyleId:`${l}:${b}:${a}:${f}:${C}`,J={textStyleId:String(o.textStyleId),textStyleName:x,fontFamily:l,fontSizeValue:r,fontStyle:b,fontSize:a,lineHeightValue:s,lineHeight:f,letterSpacingValue:I,letterSpacing:C,nodes:[...(O=(D=i[String(H)])==null?void 0:D.nodes)!=null?O:[],o.id]};return u(c({},i),{[H]:J})},{});return Object.fromEntries(Object.entries(n).sort(([i,o],[a,r])=>o.textStyleName==="mixed"?-1:r.textStyleName==="mixed"?1:o.lineHeightValue==="Auto"?-1:r.lineHeightValue==="Auto"?1:0).sort(([i,o],[a,r])=>o.letterSpacing==="mixed"||r.letterSpacing==="mixed"?0:o.letterSpacingValue<r.letterSpacingValue?-1:o.letterSpacingValue>r.letterSpacingValue?1:0).sort(([i,o],[a,r])=>o.lineHeight==="mixed"||r.lineHeight==="mixed"||o.lineHeightValue==="Auto"||r.lineHeightValue==="Auto"?0:o.lineHeightValue<r.lineHeightValue?-1:o.lineHeightValue>r.lineHeightValue?1:0).sort(([i,o],[a,r])=>o.fontSize==="mixed"||r.fontSize==="mixed"?0:o.fontSizeValue<r.fontSizeValue?-1:o.fontSizeValue>r.fontSizeValue?1:0).sort(([i,o],[a,r])=>o.textStyleName==="mixed"||r.textStyleName==="mixed"?0:o.textStyleName<r.textStyleName?-1:o.textStyleName>r.textStyleName?1:0))}});var j,S,Z=d(()=>{"use strict";h();j=(e,...t)=>E(e,...t),S=(e,t)=>N(e,t)});var W={};ne(W,{default:()=>ae});async function ae(){var o,a;let e=await figma.clientStorage.getAsync("size"),t=parseInt((o=e==null?void 0:e.width)!=null?o:400),n=parseInt((a=e==null?void 0:e.height)!=null?a:400),i=_();T({width:t,height:n},{table:i}),S("SELECTED_TEXT_NODE",()=>{let r=_();j("REFRESH_TABLE",r)}),S("SELECT_TEXT_NODE",(r,m)=>{var g,f,x;let s=(x=(f=(g=r[m])==null?void 0:g.nodes)==null?void 0:f.map(l=>figma.getNodeById(l)))==null?void 0:x.filter(l=>l!==null);s&&(figma.currentPage.selection=s,figma.viewport.scrollAndZoomIntoView(s))}),S("RESIZE",async r=>{let{width:m,height:s}=r;figma.ui.resize(m,s),await figma.clientStorage.setAsync("size",{width:m,height:s})})}var G=d(()=>{"use strict";h();v();Z()});var me={"src/main.ts--default":(G(),ie(W)).default},se="src/main.ts--default";me[se]();
