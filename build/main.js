var y=Object.defineProperty,K=Object.defineProperties,Q=Object.getOwnPropertyDescriptor,Y=Object.getOwnPropertyDescriptors,ee=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var V=(e,t,n)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,O=(e,t)=>{for(var n in t||(t={}))B.call(t,n)&&V(e,n,t[n]);if(M)for(var n of M(t))te.call(t,n)&&V(e,n,t[n]);return e},k=(e,t)=>K(e,Y(t));var f=(e,t)=>()=>(e&&(t=e(e=0)),t);var oe=(e,t)=>{for(var n in t)y(e,n,{get:t[n],enumerable:!0})},ne=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of ee(t))!B.call(e,s)&&s!==n&&y(e,s,{get:()=>t[s],enumerable:!(a=Q(t,s))||a.enumerable});return e};var re=e=>ne(y({},"__esModule",{value:!0}),e);function E(e,t){let n=`${D}`;return D+=1,g[n]={handler:t,name:e},function(){delete g[n]}}function R(e,t){let n=!1;for(let a in g)g[a].name===e&&(g[a].handler.apply(null,t),n=!0);if(n===!1)throw new Error(`No event handler with name \`${e}\``)}var g,D,N,U=f(()=>{g={},D=0;N=typeof window=="undefined"?function(e,...t){figma.ui.postMessage([e,...t])}:function(e,...t){window.parent.postMessage({pluginMessage:[e,...t]},"*")};typeof window=="undefined"?figma.ui.onmessage=function(e){if(!Array.isArray(e))return;let[t,...n]=e;typeof t=="string"&&R(t,n)}:window.onmessage=function(e){if(typeof e.data.pluginMessage=="undefined")return;let t=e.data.pluginMessage;if(!Array.isArray(t))return;let[n,...a]=e.data.pluginMessage;typeof n=="string"&&R(n,a)}});function h(e,t){if(typeof __html__=="undefined")throw new Error("No UI defined");let n=`<div id="create-figma-plugin"></div><script>document.body.classList.add('theme-${figma.editorType}');const __FIGMA_COMMAND__='${typeof figma.command=="undefined"?"":figma.command}';const __SHOW_UI_DATA__=${JSON.stringify(typeof t=="undefined"?{}:t)};${__html__}</script>`;figma.showUI(n,k(O({},e),{themeColors:typeof e.themeColors=="undefined"?!0:e.themeColors}))}var z=f(()=>{});var T=f(()=>{U();z()});var $,L,_,F=f(()=>{"use strict";$=e=>("children"in e?e.children.map(t=>$(t)):[e]).flat(),L=(e,t)=>Math.round(e*Math.pow(10,t))/Math.pow(10,t),_=async()=>{var c,l;let t=figma.currentPage.selection.flatMap($).filter(o=>o.type==="TEXT"),n=await Promise.all(t.map(async o=>{var v;if(o.textStyleId===figma.mixed||o.fontName===figma.mixed||o.fontSize===figma.mixed||o.lineHeight===figma.mixed||o.letterSpacing===figma.mixed){let p="mixed",J={textStyleId:"mixed",textStyleName:"mixed",fontFamily:"mixed",fontStyle:"mixed",fontSizeValue:0,fontSize:"mixed",lineHeightValue:0,lineHeight:"mixed",letterSpacingValue:0,letterSpacing:"mixed",nodes:[o.id]};return[p,J]}let r=String(o.fontSize),m=o.fontSize,i=o.lineHeight,u=i.unit==="AUTO"?"Auto":L(i.value,2),x=i.unit==="AUTO"?"":i.unit==="PERCENT"?"%":"px",d=`${u}${x}`,A="";if(o.textStyleId){let p=await figma.getStyleByIdAsync(String(o.textStyleId));A=(v=p==null?void 0:p.name)!=null?v:""}let I=o.fontName.family,b=o.fontName.style,w=o.letterSpacing,C=L(w.value,2),W=w.unit==="PERCENT"?"%":"px",H=`${C}${W}`,G=o.textStyleId?String(o.textStyleId):`${I}:${b}:${r}:${d}:${H}`,q={textStyleId:String(o.textStyleId),textStyleName:A,fontFamily:I,fontStyle:b,fontSizeValue:m,fontSize:r,lineHeightValue:u,lineHeight:d,letterSpacingValue:C,letterSpacing:H,nodes:[o.id]};return[G,q]})),a={};for(let[o,r]of n)a[o]?(l=a[o].nodes)==null||l.push(...(c=r==null?void 0:r.nodes)!=null?c:[]):a[o]=r;let s=Object.entries(a).sort(([o,r],[m,i])=>r.textStyleName==="mixed"?-1:i.textStyleName==="mixed"?1:r.lineHeightValue==="Auto"?-1:i.lineHeightValue==="Auto"?1:0).sort(([o,r],[m,i])=>r.letterSpacing==="mixed"||i.letterSpacing==="mixed"?0:r.letterSpacingValue-i.letterSpacingValue).sort(([o,r],[m,i])=>r.lineHeight==="mixed"||i.lineHeight==="mixed"||r.lineHeightValue==="Auto"||i.lineHeightValue==="Auto"?0:r.lineHeightValue<i.lineHeightValue?-1:r.lineHeightValue>i.lineHeightValue?1:0).sort(([o,r],[m,i])=>r.fontSize==="mixed"||i.fontSize==="mixed"?0:r.fontSizeValue-i.fontSizeValue).sort(([o,r],[m,i])=>r.textStyleName==="mixed"||i.textStyleName==="mixed"?0:r.textStyleName.localeCompare(i.textStyleName));return Object.fromEntries(s)}});var P,S,X=f(()=>{"use strict";T();P=(e,...t)=>N(e,...t),S=(e,t)=>E(e,t)});var j={};oe(j,{default:()=>ie});async function ie(){var s,c;let e=await figma.clientStorage.getAsync("size"),t=parseInt((s=e==null?void 0:e.width)!=null?s:400),n=parseInt((c=e==null?void 0:e.height)!=null?c:400),a=await _();h({width:t,height:n},{table:a}),S("SELECTED_TEXT_NODE",async()=>{let l=await _();P("REFRESH_TABLE",l)}),S("SELECT_TEXT_NODE",async(l,o)=>{var m,i,u,x;let r=(x=await Promise.all((u=(i=(m=l[o])==null?void 0:m.nodes)==null?void 0:i.map(async d=>await figma.getNodeByIdAsync(d)))!=null?u:[]))==null?void 0:x.filter(d=>d!==null);r&&(figma.currentPage.selection=r,figma.viewport.scrollAndZoomIntoView(r))}),S("RESIZE",async l=>{let{width:o,height:r}=l;figma.ui.resize(o,r),await figma.clientStorage.setAsync("size",{width:o,height:r})})}var Z=f(()=>{"use strict";T();F();X()});var ae={"src/main.ts--default":(Z(),re(j)).default},se="src/main.ts--default";ae[se]();
