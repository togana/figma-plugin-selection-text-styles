(()=>{"use strict";const e=t=>("children"in t?t.children.map((t=>e(t))):[t]).flat(),t=(e,t)=>Math.round(e*Math.pow(10,t))/Math.pow(10,t);figma.showUI(__html__,{width:400,height:600}),figma.clientStorage.getAsync("size").then((e=>{e&&figma.ui.resize(e.w,e.h)})).catch((e=>{}));const i=()=>{const i=(()=>{const i=figma.currentPage.selection.reduce(((t,i)=>[...t,...e(i)]),[]).filter((e=>"TEXT"===e.type)).reduce(((e,i)=>{var l,n,a,o,d,g;if(i.textStyleId===figma.mixed||i.fontName===figma.mixed||i.fontSize===figma.mixed||i.lineHeight===figma.mixed||i.letterSpacing===figma.mixed){const t={textStyleId:"mixed",textStyleName:"mixed",fontFamily:"mixed",fontStyle:"mixed",fontSizeValue:0,fontSize:"mixed",lineHeightValue:0,lineHeight:"mixed",letterSpacingValue:0,letterSpacing:"mixed",nodes:[...null!==(n=null===(l=e.mixed)||void 0===l?void 0:l.nodes)&&void 0!==n?n:[],i.id]};return Object.assign(Object.assign({},e),{mixed:t})}const m=String(i.fontSize),u=i.fontSize,s=i.lineHeight,r="AUTO"===s.unit?"Auto":t(s.value,2),S=`${r}${"AUTO"===s.unit?"":"PERCENT"===s.unit?"%":"px"}`,c=i.textStyleId&&null!==(o=null===(a=figma.getStyleById(String(i.textStyleId)))||void 0===a?void 0:a.name)&&void 0!==o?o:"",x=i.fontName.family,f=i.fontName.style,h=i.letterSpacing,y=t(h.value,2),p=`${y}${"PERCENT"===h.unit?"%":"px"}`,V=i.textStyleId?i.textStyleId:`${x}:${f}:${m}:${S}:${p}`,z={textStyleId:String(i.textStyleId),textStyleName:c,fontFamily:x,fontSizeValue:u,fontStyle:f,fontSize:m,lineHeightValue:r,lineHeight:S,letterSpacingValue:y,letterSpacing:p,nodes:[...null!==(g=null===(d=e[String(V)])||void 0===d?void 0:d.nodes)&&void 0!==g?g:[],i.id]};return Object.assign(Object.assign({},e),{[V]:z})}),{});return Object.fromEntries(Object.entries(i).sort((([e,t],[i,l])=>"mixed"===t.textStyleName?-1:"mixed"===l.textStyleName?1:"Auto"===t.lineHeightValue?-1:"Auto"===l.lineHeightValue?1:0)).sort((([e,t],[i,l])=>"mixed"===t.letterSpacing||"mixed"===l.letterSpacing?0:t.letterSpacingValue<l.letterSpacingValue?-1:t.letterSpacingValue>l.letterSpacingValue?1:0)).sort((([e,t],[i,l])=>"mixed"===t.lineHeight||"mixed"===l.lineHeight||"Auto"===t.lineHeightValue||"Auto"===l.lineHeightValue?0:t.lineHeightValue<l.lineHeightValue?-1:t.lineHeightValue>l.lineHeightValue?1:0)).sort((([e,t],[i,l])=>"mixed"===t.fontSize||"mixed"===l.fontSize?0:t.fontSizeValue<l.fontSizeValue?-1:t.fontSizeValue>l.fontSizeValue?1:0)).sort((([e,t],[i,l])=>"mixed"===t.textStyleName||"mixed"===l.textStyleName?0:t.textStyleName<l.textStyleName?-1:t.textStyleName>l.textStyleName?1:0)))})();figma.ui.postMessage({type:"init",table:i})};i(),figma.on("selectionchange",(()=>{i()})),figma.ui.onmessage=e=>{switch(e.type){case"select-text-node":((e,t)=>{var i,l,n;const a=null===(n=null===(l=null===(i=e[t])||void 0===i?void 0:i.nodes)||void 0===l?void 0:l.map((e=>figma.getNodeById(e))))||void 0===n?void 0:n.filter((e=>null!==e));a&&(figma.currentPage.selection=a,figma.viewport.scrollAndZoomIntoView(a))})(e.table,e.key);break;case"resize":figma.ui.resize(e.size.w,e.size.h),figma.clientStorage.setAsync("size",e.size).catch((e=>{}))}}})();